(function(e,t){"use strict";e.ConditionalSelect=function(n,r,i,s,o){function u(e,n){var r,i;for(i=0;i<e.length;i+=1){r=t.createElement("option");r.value=e[i].value;r.innerHTML=e[i].label;if(!Array.isArray(s)&&e[i]["default"]==="true"||Array.isArray(s)&&e[i].value&&s.indexOf(String(e[i].value))!==-1){r.selected=true}n.appendChild(r)}return n}function a(){var e,s,a,f,l,c,h,p,d,v,m=[],g=[];n.innerHTML="";for(s=0;s<r.options.length;s+=1){if(r.options[s].selected){m.push(r.options[s].value);g.push(r.options[s].innerHTML)}}for(a=0;a<m.length;a+=1){h=m[a];if(i[h]){l=n;c=false;if(m.length>1){c=true;l=t.createElement("optgroup");l.label=g[h]||h}if(!Array.isArray(i[h])){p=c?l.label+" - ":"";c=false;for(f in i[h]){l=t.createElement("optgroup");l.label=p+f;l=u(i[h][f],l);n.appendChild(l)}}else{l=u(i[h],l)}if(c){n.appendChild(l)}}}v=(n.className||"").split(" ");if(n.options.length===0&&v.indexOf("empty")===-1){v.push("empty");n.className=v.join(" ")}else if(n.options.length>0&&v.indexOf("empty")!==-1){v.splice(v.indexOf("empty"),1);n.className=v.join(" ")}if(o.includeBlankOption||n.options.length===0){e=t.createElement("option");e.value="";e.innerHTML=o.blankOptionLabel;if(n.options.length===0){n.appendChild(e)}else{n.insertBefore(e,n.options[0]);if(!n.value){n.options[0].selected=true}}}if(t.createEvent){d=t.createEvent("HTMLEvents");d.initEvent("change",true,true)}else{d=t.createEventObject();d.eventType="change"}d.eventName="change";if(t.createEvent){n.dispatchEvent(d)}else{n.fireEvent("on"+d.eventType,d)}}o=o||{};if(!o.hasOwnProperty("blankOptionLabel")){o.blankOptionLabel="-"}if(e.addEventListener){r.addEventListener("change",a,false);e.addEventListener("ajaxready",a,false)}else if(e.attachEvent){r.attachEvent("onchange",a);e.attachEvent("onajaxready",a)}a()};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,t){if(this===undefined||this===null){throw new TypeError('"this" is null or not defined')}var n=this.length>>>0;t=+t||0;if(Math.abs(t)===Infinity){t=0}if(t<0){t+=n;if(t<0){t=0}}for(;t<n;t+=1){if(this[t]===e){return t}}return-1}}if(!Array.isArray){Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}})(this,this.document);